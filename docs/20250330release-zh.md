<div style="text-align: center;">

<h1 align="center">ğŸš€ mymodels ğŸš€ : èŠ‚çœæ‚¨çš„æ—¶é—´ï¼è‡ªåŠ¨åŒ–å¯è§£é‡Šæœºå™¨å­¦ä¹ å·¥ä½œæµ</h1>

</div>

**å…³æ³¨å…¬ä¼—å·ï¼šğŸ‘‰GTåœ°å­¦å¿—ğŸ‘ˆ è·å–é¡¹ç›®æ›´æ–°ã€‚**

<img src="qrcode.jpg" alt="mymodels" width="130">


## ğŸ¯ è°åº”è¯¥ä½¿ç”¨mymodelsï¼Ÿ

ç§‘ç ”äººå‘˜æˆ–ï¼ˆç¡•å£«/åšå£«ï¼‰å­¦ç”Ÿå¸Œæœ›åœ¨ä»–ä»¬çš„ç ”ç©¶é¡¹ç›®ä¸­ä½¿ç”¨å¯è§£é‡Šæ€§æœºå™¨å­¦ä¹ ï¼Œä½†åˆä¸å¸Œæœ›å°†è¿‡å¤šçš„æ—¶é—´è€—è´¹åœ¨æ— æ„ä¹‰çš„å·¥å…·å®‰è£…ã€ç¯å¢ƒé…ç½®ã€ä»¥åŠä»0-1çš„ç¼–ç¨‹å­¦ä¹ å½“ä¸­ï¼ˆä¾‹å¦‚ï¼Œä¸´åºŠåŒ»å­¦ç”Ÿé€šå¸¸éœ€è¦å°†å¤§éƒ¨åˆ†æ—¶é—´ç”¨äºä¸´åºŠå·¥ä½œï¼Œç§‘ç ”çš„æ—¶é—´æ‰€å‰©æ— å‡ ï¼‰ã€‚


## ğŸ¤” ä¸ºä»€ä¹ˆé€‰æ‹© mymodelsï¼Ÿ

å¯è§£é‡Šæœºå™¨å­¦ä¹ åœ¨åœ°ç†å­¦ã€é¥æ„Ÿå’ŒåŸå¸‚è§„åˆ’ç­‰å„ä¸ªé¢†åŸŸå·²ç»è·å¾—äº†æ˜¾è‘—çš„å…³æ³¨ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹å› å…¶é€šè¿‡å¤æ‚æ‹Ÿåˆç®—æ³•æ•æ‰æ•°æ®ä¸­å¤æ‚å…³ç³»çš„å¼ºå¤§èƒ½åŠ›è€Œå¤‡å—æ¨å´‡ã€‚ä½œä¸ºè¿™äº›æ¨¡å‹çš„è¡¥å……ï¼ŒåŸºäºåšå¼ˆè®ºçš„å¯è§£é‡Šæ€§æ¡†æ¶â€”â€”å¦‚SHapley Additive exPlanations (SHAP)â€”â€”æä¾›äº†æ­ç¤ºè¿™äº›"é»‘ç›’"æ¨¡å‹çš„é‡è¦å·¥å…·ã€‚è¿™äº›å¯è§£é‡Šæ–¹æ³•é€šè¿‡å¯¹ç‰¹å¾é‡è¦æ€§æ’åºã€è¯†åˆ«éçº¿æ€§å“åº”é˜ˆå€¼ä»¥åŠåˆ†æå› ç´ ä¹‹é—´çš„äº¤äº’å…³ç³»ï¼Œæä¾›äº†å…³é”®è§è§£ã€‚

å°½ç®¡æœ‰è¿™äº›ä¼˜åŠ¿ï¼Œå®ç°å¯è§£é‡Šæœºå™¨å­¦ä¹ å·¥ä½œæµä»ç„¶æ˜¯ä¸€ä¸ªå¤æ‚ä¸”è€—æ—¶çš„è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯å¯¹äºè¯¥é¢†åŸŸçš„æ–°æ‰‹ã€‚åœ¨æœ‰æ•ˆæ‰§è¡Œè¿™äº›å·¥ä½œæµç¨‹çš„ç»¼åˆæ€§ã€ç”¨æˆ·å‹å¥½çš„å·¥å…·æ–¹é¢å­˜åœ¨æ˜æ˜¾çš„å·®è·ã€‚mymodelsé¡¹ç›®é€šè¿‡è‡ªåŠ¨åŒ–å¯è§£é‡Šæœºå™¨å­¦ä¹ è¿‡ç¨‹è§£å†³äº†è¿™ä¸€å·®è·ï¼Œåœ¨ä¿æŒåˆ†æä¸¥è°¨æ€§çš„åŒæ—¶æ˜¾è‘—å‡å°‘äº†å®æ–½æ—¶é—´ã€‚

## ğŸ‘¨â€ğŸ“ ä½ è¦å…ˆå­¦ä¸€äº›ä¸œè¥¿

1. ğŸ’¡ **PythonåŸºç¡€**

    æ¨èèµ„æºï¼š

    - [W3SCHOOLçš„Pythonæ•™ç¨‹](https://www.w3schools.com/python/default.asp)
    
    - [å»–é›ªå³°çš„Pythonæ•™ç¨‹](https://liaoxuefeng.com/books/python/introduction/index.html)

    å¿…è¦å†…å®¹ï¼š
    - åŸºç¡€çŸ¥è¯†
    - é¢å‘å¯¹è±¡å¼€å‘(OOP)
    - ä¸€äº›å¸¸ç”¨çš„Pythonå†…ç½®æ¨¡å—
    
    > **è¯·è®°ä½**ï¼šåœ¨å®Œæˆä¸Šè¿°å­¦ä¹ ååˆ¶ä½œä¸€ä¸ªä¸ªäººå°é¡¹ç›®ä»¥åŠ å¼ºæ‰€å­¦å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªå°å‹ç½‘ç»œçˆ¬è™«ï¼‰ã€‚[è¿™æ˜¯æˆ‘çš„ä¸€ä¸ªç»ƒä¹ é¡¹ç›®](https://github.com/gtzjh/WundergroundSpider)

2. ğŸ’¡ **æœºå™¨å­¦ä¹ åŸºç¡€**

    [å´æ©è¾¾æœºå™¨å­¦ä¹ æ•™ç¨‹](https://www.bilibili.com/video/BV1Bq421A74G) å´æ©è¾¾è€å¸ˆçš„è¯¾ç¨‹æä¾›äº†å¿…è¦çš„ç†è®ºåŸºç¡€ã€‚


3. ğŸ’¡ **æŠ€æœ¯æŠ€èƒ½**

    - ä½¿ç”¨conda/pipè¿›è¡Œç¯å¢ƒç®¡ç†
    - ç†Ÿæ‚‰ç»ˆç«¯/å‘½ä»¤è¡Œ
    - ä½¿ç”¨Gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ ([æˆ‘çš„Gitå­¦ä¹ ç¬”è®°](https://github.com/gtzjh/learngit))

## ğŸ› ï¸ ç¯å¢ƒè®¾ç½®

æ”¯æŒçš„å¹³å°ï¼š

- Windows (X86) [åœ¨Windows 10/11ä¸Šæµ‹è¯•é€šè¿‡]
- Linux (X86) [åœ¨WSL2.0 (Ubuntu)ä¸Šæµ‹è¯•é€šè¿‡]
- macOS (ARM) [åœ¨Apple Silicon (M1)ä¸Šæµ‹è¯•é€šè¿‡]

### åˆ›å»ºç¯å¢ƒ

**è¦æ±‚**ï¼š
- Python 3.10.X
- 1.75 GBå¯ç”¨ç£ç›˜ç©ºé—´

åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
conda env create -f requirement.yml -n mymodels -y
```

> æ‚¨ä¹Ÿå¯ä»¥æ ¹æ®`requirement.yml`æ–‡ä»¶ä½¿ç”¨`pip`æ‰‹åŠ¨åˆ›å»ºç¯å¢ƒï¼š

---

### æ¿€æ´»ç¯å¢ƒ

åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
conda activate mymodels
```

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

æˆ‘ä»¬ä»¥`run_titanic.py`ä¸ºä¾‹ï¼š


### å¯¼å…¥åŒ…

#### ç¤ºä¾‹

```python
from mymodels.pipeline import MyPipeline
```

---

### æ„å»ºå·¥ä½œæµå¯¹è±¡

#### å‚æ•°

- **results_dir**ï¼šå­˜å‚¨ç»“æœçš„ç›®å½•è·¯å¾„ã€‚æ¥å—å­—ç¬¦ä¸²æˆ–pathlib.Pathå¯¹è±¡ã€‚å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºè¯¥ç›®å½•ã€‚

- **random_state**ï¼šæ•´ä¸ªæµæ°´çº¿çš„éšæœºç§å­ï¼ˆæ•°æ®åˆ†å‰²ã€æ¨¡å‹è°ƒä¼˜ç­‰ï¼‰ã€‚ï¼ˆé»˜è®¤ä¸º0ï¼‰

- **show**ï¼šæ˜¯å¦åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå›¾åƒã€‚ï¼ˆé»˜è®¤ä¸º`False`ï¼‰

- **plot_format**ï¼šå›¾åƒè¾“å‡ºæ ¼å¼ã€‚ï¼ˆé»˜è®¤ä¸ºjpgï¼‰

- **plot_dpi**ï¼šæ§åˆ¶è¾“å‡ºå›¾åƒçš„åˆ†è¾¨ç‡ã€‚ï¼ˆé»˜è®¤ä¸º500ï¼‰

#### ç¤ºä¾‹

```python
mymodel = MyPipeline(
    results_dir = "results/titanic",
    random_state = 0,
    show = False,
    plot_format = "jpg",
    plot_dpi = 500
)
```

---

### åŠ è½½æ•°æ®

#### å‚æ•°

- **file_path**ï¼šæ‚¨è¦è¾“å…¥çš„æ•°æ®æ‰€åœ¨ä½ç½®ã€‚**.csvæ ¼å¼æ˜¯å¿…éœ€çš„**ã€‚

- **y**ï¼šæ‚¨è¦é¢„æµ‹çš„ç›®æ ‡ã€‚è¡¨ç¤ºåˆ—åçš„`str`å¯¹è±¡æˆ–è¡¨ç¤ºåˆ—ç´¢å¼•çš„`int`å¯¹è±¡éƒ½æ˜¯å¯ä»¥æ¥å—çš„ã€‚

- **x_list**ï¼šç‹¬ç«‹å˜é‡çš„`list`å¯¹è±¡ï¼ˆæˆ–`tuple`å¯¹è±¡ï¼‰ã€‚`list`ï¼ˆæˆ–`tuple`ï¼‰ä¸­çš„æ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯è¡¨ç¤ºåˆ—åçš„`str`å¯¹è±¡æˆ–è¡¨ç¤ºåˆ—ç´¢å¼•çš„`int`å¯¹è±¡ã€‚

- **index_col**ï¼šè¡¨ç¤ºç´¢å¼•åˆ—çš„`int`å¯¹è±¡æˆ–`str`å¯¹è±¡ã€‚ï¼ˆé»˜è®¤ä¸º`None`ï¼‰

    > å¦‚æœæ‚¨æƒ³è¾“å‡ºåŸå§‹æ•°æ®å’Œshapå€¼ï¼Œå¼ºçƒˆå»ºè®®è®¾ç½®ç´¢å¼•åˆ—ã€‚åŒæ ·ï¼Œæä¾›è¡¨ç¤ºå¤šä¸ªç´¢å¼•åˆ—çš„`list`å¯¹è±¡ï¼ˆæˆ–`tuple`å¯¹è±¡ï¼‰ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚

- **test_ratio**ï¼šæµ‹è¯•æ•°æ®çš„æ¯”ä¾‹ã€‚ï¼ˆé»˜è®¤ä¸º0.3ï¼‰

- **inspect**ï¼šæ˜¯å¦åœ¨ç»ˆç«¯ä¸­æ˜¾ç¤ºæ‚¨é€‰æ‹©çš„yåˆ—æˆ–ç‹¬ç«‹å˜é‡ã€‚ï¼ˆé»˜è®¤ä¸º`True`ï¼‰

#### ç¤ºä¾‹

```python
mymodel.load(
    file_path = "data/titanic.csv",
    y = "Survived",
    x_list = ["Pclass", "Sex", "Embarked", "Age", "SibSp", "Parch", "Fare"],
    index_col = ["PassengerId", "Name"],
    test_ratio = 0.3,
    inspect = False
)
```

---

### æ‰§è¡Œä¼˜åŒ–

#### å‚æ•°

- **model_name**ï¼šæ‚¨è¦ä½¿ç”¨çš„æ¨¡å‹ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ`xgbc`ä»£è¡¨XGBooståˆ†ç±»å™¨ï¼Œå…¶ä»–æ¨¡å‹åç§°å¦‚`catr`è¡¨ç¤ºCatBoostå›å½’å™¨ã€‚è¡¨ç¤ºä¸åŒæ¨¡å‹å’Œä»»åŠ¡çš„å®Œæ•´æ¨¡å‹åç§°åˆ—è¡¨å¯åœ¨æœ«å°¾æ‰¾åˆ°ã€‚

- **cat_features**ï¼šä¸ºæ¨¡å‹æŒ‡å®šçš„åˆ†ç±»ç‰¹å¾çš„`list`ï¼ˆæˆ–`tuple`ï¼‰ã€‚è¡¨ç¤ºåˆ—åçš„`str`çš„`list`ï¼ˆæˆ–`tuple`ï¼‰æˆ–è¡¨ç¤ºåˆ—ç´¢å¼•çš„`int`éƒ½æ˜¯å¯ä»¥æ¥å—çš„ã€‚ï¼ˆé»˜è®¤ä¸º`None`ï¼‰

- **encode_method**ï¼šè¡¨ç¤ºç¼–ç æ–¹æ³•çš„`str`å¯¹è±¡ï¼Œæˆ–ç¼–ç æ–¹æ³•çš„`list`ï¼ˆæˆ–`tuple`ï¼‰éƒ½æ˜¯å¯ä»¥æ¥å—çš„ã€‚ï¼ˆé»˜è®¤ä¸º`None`ï¼‰

  å¦‚æœä»…å‘ˆç°å•ä¸ªç¼–ç æ–¹æ³•ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼Œä»…å‘ˆç°`onehot`ç¼–ç æ–¹æ³•ï¼‰ï¼Œå®ƒå°†åº”ç”¨äºæ‰€æœ‰åˆ†ç±»ç‰¹å¾ï¼ˆå¦‚`encode_method`ä¸­åˆ—å‡ºçš„ï¼‰ã€‚

  å¦‚æœå‘ˆç°ç¼–ç æ–¹æ³•çš„`list`ï¼ˆæˆ–`tuple`ï¼‰ï¼Œä¾‹å¦‚`["onehot", "binary", "target"]`ï¼Œå®ƒä»¬å°†åˆ†åˆ«åº”ç”¨äºä¸‰ä¸ªåˆ†ç±»ç‰¹å¾ã€‚å› æ­¤ï¼Œ`encode_method`çš„é•¿åº¦å¿…é¡»ä¸`cat_features`çš„é•¿åº¦ç›¸åŒã€‚

  > æ”¯æŒçš„ç¼–ç æ–¹æ³•å®Œæ•´åˆ—è¡¨å¯åœ¨æœ«å°¾æ‰¾åˆ°ã€‚

  

- **cv**ï¼šè°ƒä¼˜è¿‡ç¨‹ä¸­çš„äº¤å‰éªŒè¯ã€‚ï¼ˆé»˜è®¤ä¸º5ï¼‰

- **trials**ï¼šè´å¶æ–¯è°ƒä¼˜è¿‡ç¨‹ä¸­çš„è¯•éªŒæ¬¡æ•°ï¼ˆåŸºäº[Optuna](https://optuna.org/)ï¼‰ã€‚ï¼ˆé»˜è®¤ä¸º50ï¼‰

- **n_jobs**ï¼šäº¤å‰éªŒè¯è¿‡ç¨‹ä¸­å°†ä½¿ç”¨çš„æ ¸å¿ƒæ•°é‡ã€‚å»ºè®®ä½¿ç”¨ä¸`cv`ç›¸åŒçš„å€¼ã€‚ï¼ˆé»˜è®¤ä¸º5ï¼‰

- **optimize_history**ï¼šæ˜¯å¦ä¿å­˜ä¼˜åŒ–å†å²ã€‚ï¼ˆé»˜è®¤ä¸º`True`ï¼‰

- **save_optimal_params**ï¼šæ˜¯å¦ä¿å­˜æœ€ä½³å‚æ•°ã€‚ï¼ˆé»˜è®¤ä¸º`True`ï¼‰

- **save_optimal_model**ï¼šæ˜¯å¦ä¿å­˜æœ€ä¼˜æ¨¡å‹ã€‚ï¼ˆé»˜è®¤ä¸º`True`ï¼‰

#### è¾“å‡º

ç»“æœç›®å½•ä¸­å°†è¾“å‡ºå‡ ä¸ªæ–‡ä»¶ï¼š

- `params.yml`å°†è®°å½•æœ€ä½³å‚æ•°ã€‚

- `mapping.json`å°†è®°å½•åˆ†ç±»ç‰¹å¾ä¸ç¼–ç ç‰¹å¾ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚

- `optimal-model.joblib`å°†ä¿å­˜æ¥è‡ªsklearnçš„æœ€ä¼˜æ¨¡å‹ã€‚

- `optimal-model.cbm`å°†ä¿å­˜æ¥è‡ªCatBoostçš„æœ€ä¼˜æ¨¡å‹ã€‚

- `optimal-model.txt`å°†ä¿å­˜æ¥è‡ªLightGBMçš„æœ€ä¼˜æ¨¡å‹ã€‚

- `optimal-model.json`å°†ä¿å­˜æ¥è‡ªXGBoostçš„æœ€ä¼˜æ¨¡å‹ã€‚

- `optimal-model.pkl`å°†ä¿å­˜æ‰€æœ‰ç±»å‹çš„æœ€ä¼˜æ¨¡å‹ä»¥å®ç°å…¼å®¹æ€§ã€‚

#### ç¤ºä¾‹

```python
mymodel.optimize(
    model_name = "xgbc",
    cat_features = ["Pclass", "Sex", "Embarked"],
    encode_method = "onehot",
    cv = 5,
    trials = 10,
    n_jobs = 5,
    optimize_history = True,
    save_optimal_params = True,
    save_optimal_model = True
)
```

---

### è¯„ä¼°æ¨¡å‹çš„å‡†ç¡®æ€§

#### å‚æ•°

- **save_raw_data**ï¼šæ˜¯å¦ä¿å­˜åŸå§‹é¢„æµ‹æ•°æ®ã€‚é»˜è®¤ä¸º`True`ã€‚

#### è¾“å‡º

å‡†ç¡®æ€§ç»“æœå°†è¾“å‡ºåˆ°æ‚¨ä¸Šé¢å®šä¹‰çš„ç›®å½•ï¼š

- åä¸º`accuracy`çš„`.yml`æ–‡ä»¶å°†è®°å½•æ¨¡å‹å‡†ç¡®æ€§çš„ç»“æœã€‚

- åä¸º`roc_curve_plot`çš„å›¾å½¢è®°å½•åˆ†ç±»å‡†ç¡®æ€§ã€‚

- æˆ–è€…åä¸º`accuracy_plot`çš„å›¾å½¢ï¼ˆè¿™æ˜¯ä¸€ä¸ªæ•£ç‚¹å›¾ï¼‰ç”¨äºå›å½’ä»»åŠ¡ã€‚

#### ç¤ºä¾‹
```python
mymodel.evaluate(save_raw_data = True)
```

---

### ä½¿ç”¨SHAPï¼ˆSHapley Additive exPlanationsï¼‰è§£é‡Šæ¨¡å‹

#### å‚æ•°

- **select_background_data**ï¼šç”¨äº**èƒŒæ™¯å€¼è®¡ç®—**çš„æ•°æ®ã€‚ï¼ˆé»˜è®¤ä¸º`"train"`ï¼‰

    é»˜è®¤ä¸º`"train"`ï¼Œè¡¨ç¤ºå°†ä½¿ç”¨è®­ç»ƒé›†ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚`"test"`è¡¨ç¤ºå°†ä½¿ç”¨æµ‹è¯•é›†ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚`"all"`è¡¨ç¤ºå°†ä½¿ç”¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚

- **select_shap_data**ï¼šç”¨äº**è®¡ç®—SHAPå€¼**çš„æ•°æ®ã€‚é»˜è®¤ä¸º`"test"`ï¼Œè¡¨ç¤ºå°†ä½¿ç”¨æµ‹è¯•é›†ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚`"all"`è¡¨ç¤ºå°†ä½¿ç”¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚ï¼ˆé»˜è®¤ä¸º`"test"`ï¼‰

- **sample_background_data_k**ï¼šå¯¹è®­ç»ƒé›†ä¸­çš„æ ·æœ¬è¿›è¡ŒæŠ½æ ·ï¼Œç”¨äº**èƒŒæ™¯å€¼è®¡ç®—**ã€‚ï¼ˆé»˜è®¤ä¸º`None`ï¼‰
    
    é»˜è®¤`None`ï¼Œè¡¨ç¤ºå°†ä½¿ç”¨è®­ç»ƒé›†ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚æ•´æ•°å€¼è¡¨ç¤ºå®é™…æ•°æ®æ•°é‡ï¼Œè€Œæµ®ç‚¹æ•°ï¼ˆä¾‹å¦‚0.5ï¼‰è¡¨ç¤ºè®­ç»ƒé›†ä¸­çš„æ¯”ä¾‹ã€‚

- **sample_shap_data_k**ï¼šä¸`sample_background_data_k`å«ä¹‰ç±»ä¼¼ã€‚æµ‹è¯•é›†å°†ç”¨äº**SHAPå€¼è®¡ç®—**ã€‚ï¼ˆé»˜è®¤ä¸º`None`ï¼‰

- **output_raw_data**ï¼šæ˜¯å¦ä¿å­˜åŸå§‹æ•°æ®ã€‚é»˜è®¤ä¸º`False`ã€‚

#### è¾“å‡º

å›¾å½¢ï¼ˆæ‘˜è¦å›¾ã€ä¾èµ–å›¾ï¼‰å°†è¾“å‡ºåˆ°æ‚¨ä¸Šé¢å®šä¹‰çš„ç›®å½•ã€‚

#### ç¤ºä¾‹

```python
mymodel.explain(
    select_background_data = "train",
    select_shap_data = "test",
    sample_background_data_k = 50,
    sample_shap_data_k = 50,
    output_raw_data = True
)
```

---

### è¿è¡Œä»£ç 

åœ¨VSCodeä¸­æŒ‰`F5`ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œã€‚

æˆ–è€…åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
python run_titanic.py
```

---

### å®Œæ•´ä»£ç 

```python
from mymodels.pipeline import MyPipeline


def main():
    mymodel = MyPipeline(
        results_dir = "results/titanic",
        random_state = 0,
        show = False,
        plot_format = "jpg",
        plot_dpi = 500
    )
    mymodel.load(
        file_path = "data/titanic.csv",
        y = "Survived",
        x_list = ["Pclass", "Sex", "Embarked", "Age", "SibSp", "Parch", "Fare"],
        index_col = ["PassengerId", "Name"],
        test_ratio = 0.3,
        inspect = False
    )
    mymodel.optimize(
        model_name = "rfc",
        cat_features = ["Pclass", "Sex", "Embarked"],
        encode_method = "onehot",
        cv = 5,
        trials = 10,
        n_jobs = 5,
        optimize_history = True,
        save_optimal_params = True,
        save_optimal_model = True
    )
    mymodel.evaluate(save_raw_data = True)
    mymodel.explain(
        select_background_data = "train",
        select_shap_data = "test",
        sample_background_data_k = 50,
        sample_shap_data_k = 50,
        output_raw_data = True
    )

    return None


if __name__ == "__main__":
    main()
```


## ğŸ¯ å°è¯•è¿™äº›ç¤ºä¾‹

- `run_housing.py`ï¼šå›å½’ä»»åŠ¡  
  æ•°æ®é›†æ¥æºï¼š[Kaggleä½æˆ¿æ•°æ®](https://www.kaggle.com/datasets/jamalshah811/housingdata)

- `run_obesity.py`ï¼šå¤šç±»åˆ†ç±»  
  æ•°æ®é›†æ¥æºï¼š[è‚¥èƒ–é£é™©æ•°æ®é›†](https://www.kaggle.com/datasets/jpkochar/obesity-risk-dataset)

- `run_titanic.py`ï¼šäºŒå…ƒåˆ†ç±»  
  æ•°æ®é›†æ¥æºï¼š[æ³°å¦å°¼å…‹ï¼šä»ç¾éš¾ä¸­å­¦ä¹ æœºå™¨å­¦ä¹ ](https://www.kaggle.com/c/titanic/data)


## ğŸ“š è¡¥å……ä¿¡æ¯

### ğŸ› ï¸ æ‰€éœ€åŒ…

éœ€è¦ä»¥ä¸‹åŒ…ï¼š
  - catboost=1.2.7
  - ipython=8.30.0
  - lightgbm=4.5.0
  - matplotlib-base=3.9.3
  - numba=0.60.0
  - numpy=1.26.4
  - optuna=4.1.0
  - pandas=2.2.3
  - pip=24.3.1
  - plotly=5.24.1
  - py-xgboost=2.1.4
  - python-graphviz=0.20.3
  - python=3.10.16
  - scikit-learn=1.5.2
  - scipy=1.14.1
  - setuptools=75.6.0
  - shap=0.46.0
  - tqdm=4.67.1
  - wheel=0.45.1
  - category_encoders=2.6.3


### ğŸ› ï¸ æ”¯æŒçš„æ¨¡å‹

*ç‚¹å‡»ç¬¬äºŒåˆ—ä¸­çš„é“¾æ¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚*

#### å›å½’ä»»åŠ¡
| `model_name` | æ¨¡å‹|
|------------|-------|
| svr        | [æ”¯æŒå‘é‡å›å½’](https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVR.html) |
| knr        | [Kè¿‘é‚»å›å½’](https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsRegressor.html) |
| mlpr       | [å¤šå±‚æ„ŸçŸ¥å™¨å›å½’å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPRegressor.html) |
| dtr        | [å†³ç­–æ ‘å›å½’å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html) |
| rfr        | [éšæœºæ£®æ—å›å½’å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html) |
| gbdtr        | [æ¢¯åº¦æå‡å†³ç­–æ ‘(GBDT)å›å½’å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.GradientBoostingRegressor.html) |
| adar        | [AdaBoostå›å½’å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.AdaBoostRegressor.html) |
| xgbr       | [XGBoostå›å½’å™¨](https://xgboost.readthedocs.io/en/latest/python/python_api.html) |
| lgbr      | [LightGBMå›å½’å™¨](https://lightgbm.readthedocs.io/en/latest/pythonapi/lightgbm.LGBMRegressor.html) |
| catr       | [CatBoostå›å½’å™¨](https://catboost.ai/en/docs/concepts/python-reference_catboostregressor) |

#### åˆ†ç±»ä»»åŠ¡

| `model_name` | æ¨¡å‹|
|------------|-------|
| svc        | [æ”¯æŒå‘é‡åˆ†ç±»](https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html) |
| knc        | [Kè¿‘é‚»åˆ†ç±»](https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html) |
| mlpc       | [å¤šå±‚æ„ŸçŸ¥å™¨åˆ†ç±»å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPClassifier.html) |
| dtc        | [å†³ç­–æ ‘åˆ†ç±»å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html) |
| rfc        | [éšæœºæ£®æ—åˆ†ç±»å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html) |
| gbdtc        | [æ¢¯åº¦æå‡å†³ç­–æ ‘(GBDT)åˆ†ç±»å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.GradientBoostingClassifier.html) |
| adac        | [AdaBooståˆ†ç±»å™¨](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.AdaBoostClassifier.html) |
| xgbc       | [XGBooståˆ†ç±»å™¨](https://xgboost.readthedocs.io/en/latest/python/python_api.html) |
| lgbc      | [LightGBMåˆ†ç±»å™¨](https://lightgbm.readthedocs.io/en/latest/pythonapi/lightgbm.LGBMClassifier.html) |
| catc       | [CatBooståˆ†ç±»å™¨](https://catboost.ai/en/docs/concepts/python-reference_catboostclassifier) |


### ğŸ› ï¸ æ”¯æŒçš„ç¼–ç æ–¹æ³•

| `encode_method` | æè¿° |
|------------|------------------|
| onehot   | ç‹¬çƒ­ç¼–ç    |
| binary   | äºŒè¿›åˆ¶ç¼–ç     |
| target   | ç›®æ ‡ç¼–ç     |
| ordinal  | åºæ•°ç¼–ç    |
| label    | æ ‡ç­¾ç¼–ç      |
| frequency| é¢‘ç‡ç¼–ç  |


### âš ï¸ æ‚¨åº”è¯¥çŸ¥é“çš„äº‹æƒ…

- å½“ä½¿ç”¨`catc`æ¨¡å‹è¿›è¡Œåˆ†ç±»ä»»åŠ¡ï¼Œæˆ–ä½¿ç”¨`catr`æ¨¡å‹è¿›è¡Œå›å½’ä»»åŠ¡æ—¶ï¼Œ`encode_method`å¿…é¡»ä¸º`None`ã€‚

- å½“ä½¿ç”¨GBDTæ¨¡å‹æ—¶ï¼ŒSHAPç›®å‰ä¸æ”¯æŒå¤šç±»åˆ†ç±»ä»»åŠ¡ã€‚